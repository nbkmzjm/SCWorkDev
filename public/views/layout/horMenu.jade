#horMenu
	nav(class="navbar navbar-default navbar-fixed-top" role="navigation")
		div(class="container-fluid")
			div(class="navbar-header")
				button(type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navMain" aria-expanded="true" aria-controls="navMain")
					span(class="sr-only") Toggle navigation
					span(class="icon-bar")
					span(class="icon-bar")
					span(class="icon-bar")

				//- button(type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#")
				//- 	span(class="sr-only") Shopping Cart
				//- 	span(class="glyphicon glyphicon-shopping-cart" aria-hidden="false")
				button(type="button" id='test') Test
				button(type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#taskOptionDiv" id='optionTextS') 
					span(class="glyphicon glyphicon-edit" aria-hidden="true") SELECT 

				a(class="navbar-brand", href="/")
					span(class="glyphicon glyphicon-home" aria-hidden="false") BCP 
			

			div(id="navMain" class="navbar-collapse collapse")
				
				ul(class="nav navbar-nav" id='horMenuList')
					
					li(class='active')
						a(href="/") Home
					li( id='user')
						a(href="/users") Users
					li
						a(href="/notif" id='notifBtn') Notification
				ul(class="nav navbar-nav navbar-right")
					li
						a(href='#' class="btn" data-toggle="collapse" data-target="#taskOptionDiv" id='optionTextL') 
							span(class="glyphicon glyphicon-edit" aria-hidden="false") SELECT 
							
					li
						a(href="#" id='curUserName') 
					li  
						a(href="/users/logout" id= 'signOut' class="btn btn-info btn-md")
							span(class="glyphicon glyphicon-log-out")  Sign-Out
script.
	$(function (){
		$.getJSON('/users/curUser').done(function(Rdata){
			
			$('#curUserName').append(Rdata.curUserName)
		})
		function send_message_to_sw(msg){
			if(navigator.serviceWorker.controller){
				var messageChannel = new MessageChannel();
				alert('bbbbResponsedrrrr')
		        messageChannel.port1.onmessage = function(event) {
		        	alert('Responsedrrrr')
		            console.log("Response the SW : ", event.data);
		        }
		        navigator.serviceWorker.onmessage = function(event) {
		        	console.log("Broadcasted SW : ", event.data);
		        	//- document.getElementById('notifBtn').innerHTML = event.data
		        }
			    navigator.serviceWorker.controller.postMessage("Client 1 says '"+msg+"'", [messageChannel.port2]);
		   	}
		}

		document.getElementById('test').addEventListener('click',function(){
			send_message_to_sw('hello')
		})

		
		

		//- document.getElementById('signOut').addEventListener('click',function(){

		//- 	alert('signing out...')
		//- 	navigator.serviceWorker.ready.then(function(serviceWorkerRegistration) {
		//- 		serviceWorkerRegistration.pushManager.getSubscription()
		//- 		.then(function(subscription) {
		//- 		    if (subscription) {
		//- 		      return subscription.unsubscribe();
		//- 		    }
		//- 	  	})
		//- 	})

		//- })

	})